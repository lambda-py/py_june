{% extends 'content.html' %}
{% load static %}
{% load i18n %}

{% block link %}
  <link rel="stylesheet" href="{% static 'css/posts.css' %}">
{% endblock %}

{% block title %}
  {{ category.title }}
{% endblock %}

{% block breadcrumbs %}
  <a href="{% url 'categories:list' %}">PY_JUNE</a> / <span class="active">{{ category.title }}</span>
{% endblock %}

{% block content %}
  <div id="category-details">
    <div class="row">
      <div class="col s10">
        <h1>{{ category.title }}</h1>
        <hr>
        <h2>{{ category.description }}</h2>
      </div>
      <div class="col s2">
        <a href="{% url 'posts:create' category_slug=category.slug %}" class="waves-effect waves-light btn btn-small">
          {% trans "Create Post" %}
        </a>
      </div>
    </div>

    <div class="row">
      <div class="col s10 center">
        <hr>
        <ul>
          {% for num in page_obj.paginator.page_range %}
          <li class="{% if current_page_objects.number == num %}active-page{% else %}inactive-page{% endif %} waves-effect">
              <h3><a href="?page={{ num }}">{{ num }}</a>,</h3>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col s12 center">
        <table class="striped">
          <thead>
          <tr>
            <th></th>
            <th>{% trans "Comments" %}</th>
            <th>{% trans "Last comment" %}</th>
          </tr>
          </thead>
          <tbody>
          {% for post in page_obj %}
            <tr>
              <td>
                <a href="{% url 'posts:details' post_slug=post.slug %}">
                  <h3>{{ post.title }}</h3>
                </a>
              </td>
              <td>{{ post.comments_count }}</td>
              <td>
                <ul>
                  <li>
                    <i class="tiny material-icons">access_time</i>
                    {{ post.comments.last.created_at|date:"d/m H:i" }}
                  </li>
                  <li>
                    <i class="tiny material-icons">person</i>
                    {{ post.comments.last.author }}
                  </li>
                </ul>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}